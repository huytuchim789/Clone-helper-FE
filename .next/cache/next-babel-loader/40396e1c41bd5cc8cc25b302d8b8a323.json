{"ast":null,"code":"var _jsxFileName = \"D:\\\\stackoverflow-clone\\\\client\\\\components\\\\user-card\\\\avatar-card\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNowStrict';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport { publicFetch } from '../../../util/fetcher';\nimport { Spinner } from '../../icons';\nimport styles from './avatar-card.module.css';\nimport { AuthContext } from '../../../store/auth';\nimport Button from '../../button';\nimport { message } from 'antd';\nimport { FetchContext } from '../../../store/fetch';\nimport { Modal } from 'antd';\nconst {\n  error\n} = Modal;\nconst UserAvatar = ({\n  username\n}) => {\n  const {\n    0: userInfo,\n    1: setUserInfo\n  } = useState(null);\n  const {\n    isAdmin\n  } = useContext(AuthContext);\n  const {\n    authAxios\n  } = useContext(FetchContext);\n  const blockUser = async () => {\n    authAxios.put(`/blocked/user/${userInfo === null || userInfo === void 0 ? void 0 : userInfo.id}`).then(res => {\n      console.log(res);\n      message.success('Successfully Blocked');\n      history.back();\n    }).catch(() => {\n      message.error('Failed Blocked');\n      history.back();\n    });\n  };\n  useEffect(() => {\n    const fetchUser = async () => {\n      const {\n        data\n      } = await publicFetch.get(`/user/${username}`);\n      setUserInfo(data);\n    };\n    fetchUser();\n  }, [username]);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, userInfo !== null && userInfo !== void 0 && userInfo.isBlocked ? __jsx(Modal.error, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"icon: \", __jsx(ExclamationCircleOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }), \", content:\", ' ', __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, \"User are being blocked\")) : __jsx(\"div\", {\n    className: styles.avatarCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, !userInfo ? __jsx(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, __jsx(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  })) : __jsx(\"div\", {\n    className: styles.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, __jsx(Link, {\n    href: \"/users/[username]\",\n    as: `/users/${username}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, __jsx(\"img\", {\n    src: `https://secure.gravatar.com/avatar/${userInfo.id}?s=164&d=identicon`,\n    alt: username,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 19\n    }\n  })))), __jsx(\"h2\", {\n    className: styles.username,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, username), !userInfo ? __jsx(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, __jsx(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  })) : __jsx(\"div\", {\n    className: styles.created,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }, \"Created:\", ' ', __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, formatDistanceToNowStrict(new Date(userInfo.created), {\n    addSuffix: true\n  }))), isAdmin && __jsx(Button, {\n    style: {\n      backgroundColor: 'red'\n    },\n    primary: true,\n    onClick: blockUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, \"Block\"))));\n};\nexport default UserAvatar;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","formatDistanceToNowStrict","ExclamationCircleOutlined","publicFetch","Spinner","styles","AuthContext","Button","message","FetchContext","Modal","error","UserAvatar","username","userInfo","setUserInfo","isAdmin","authAxios","blockUser","put","id","then","res","console","log","success","history","back","catch","fetchUser","data","get","isBlocked","avatarCard","avatar","created","Date","addSuffix","backgroundColor"],"sources":["D:/stackoverflow-clone/client/components/user-card/avatar-card/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNowStrict'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons'\r\n\r\nimport { publicFetch } from '../../../util/fetcher'\r\n\r\nimport { Spinner } from '../../icons'\r\n\r\nimport styles from './avatar-card.module.css'\r\nimport { AuthContext } from '../../../store/auth'\r\nimport Button from '../../button'\r\nimport { message } from 'antd'\r\nimport { FetchContext } from '../../../store/fetch'\r\nimport { Modal } from 'antd'\r\n\r\nconst { error } = Modal\r\nconst UserAvatar = ({ username }) => {\r\n  const [userInfo, setUserInfo] = useState(null)\r\n  const { isAdmin } = useContext(AuthContext)\r\n  const { authAxios } = useContext(FetchContext)\r\n\r\n  const blockUser = async () => {\r\n    authAxios\r\n      .put(`/blocked/user/${userInfo?.id}`)\r\n      .then((res) => {\r\n        console.log(res)\r\n        message.success('Successfully Blocked')\r\n        history.back()\r\n      })\r\n      .catch(() => {\r\n        message.error('Failed Blocked')\r\n        history.back()\r\n      })\r\n  }\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const { data } = await publicFetch.get(`/user/${username}`)\r\n      setUserInfo(data)\r\n    }\r\n\r\n    fetchUser()\r\n  }, [username])\r\n\r\n  return (\r\n    <div>\r\n      {userInfo?.isBlocked ? (\r\n        <Modal.error>\r\n          icon: <ExclamationCircleOutlined />, content:{' '}\r\n          <p>User are being blocked</p>\r\n        </Modal.error>\r\n      ) : (\r\n        <div className={styles.avatarCard}>\r\n          {!userInfo ? (\r\n            <div className=\"loading\">\r\n              <Spinner />\r\n            </div>\r\n          ) : (\r\n            <div className={styles.avatar}>\r\n              <Link href=\"/users/[username]\" as={`/users/${username}`}>\r\n                <a>\r\n                  <img\r\n                    src={`https://secure.gravatar.com/avatar/${userInfo.id}?s=164&d=identicon`}\r\n                    alt={username}\r\n                  />\r\n                </a>\r\n              </Link>\r\n            </div>\r\n          )}\r\n          <h2 className={styles.username}>{username}</h2>\r\n          {!userInfo ? (\r\n            <div className=\"loading\">\r\n              <Spinner />\r\n            </div>\r\n          ) : (\r\n            <div className={styles.created}>\r\n              <p>\r\n                Created:{' '}\r\n                <span>\r\n                  {formatDistanceToNowStrict(new Date(userInfo.created), {\r\n                    addSuffix: true\r\n                  })}\r\n                </span>\r\n              </p>\r\n              {isAdmin && (\r\n                <Button\r\n                  style={{ backgroundColor: 'red' }}\r\n                  primary\r\n                  onClick={blockUser}\r\n                >\r\n                  Block\r\n                </Button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserAvatar\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,OAAOC,IAAI,MAAM,WAAW;AAC5B,OAAOC,yBAAyB,MAAM,oCAAoC;AAC1E,SAASC,yBAAyB,QAAQ,mBAAmB;AAE7D,SAASC,WAAW,QAAQ,uBAAuB;AAEnD,SAASC,OAAO,QAAQ,aAAa;AAErC,OAAOC,MAAM,MAAM,0BAA0B;AAC7C,SAASC,WAAW,QAAQ,qBAAqB;AACjD,OAAOC,MAAM,MAAM,cAAc;AACjC,SAASC,OAAO,QAAQ,MAAM;AAC9B,SAASC,YAAY,QAAQ,sBAAsB;AACnD,SAASC,KAAK,QAAQ,MAAM;AAE5B,MAAM;EAAEC;AAAM,CAAC,GAAGD,KAAK;AACvB,MAAME,UAAU,GAAG,CAAC;EAAEC;AAAS,CAAC,KAAK;EACnC,MAAM;IAAA,GAACC,QAAQ;IAAA,GAAEC;EAAW,IAAIhB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM;IAAEiB;EAAQ,CAAC,GAAGnB,UAAU,CAACS,WAAW,CAAC;EAC3C,MAAM;IAAEW;EAAU,CAAC,GAAGpB,UAAU,CAACY,YAAY,CAAC;EAE9C,MAAMS,SAAS,GAAG,YAAY;IAC5BD,SAAS,CACNE,GAAG,CAAE,iBAAgBL,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM,EAAG,EAAC,CAAC,CACpCC,IAAI,CAAEC,GAAG,IAAK;MACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBd,OAAO,CAACiB,OAAO,CAAC,sBAAsB,CAAC;MACvCC,OAAO,CAACC,IAAI,EAAE;IAChB,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;MACXpB,OAAO,CAACG,KAAK,CAAC,gBAAgB,CAAC;MAC/Be,OAAO,CAACC,IAAI,EAAE;IAChB,CAAC,CAAC;EACN,CAAC;EACD7B,SAAS,CAAC,MAAM;IACd,MAAM+B,SAAS,GAAG,YAAY;MAC5B,MAAM;QAAEC;MAAK,CAAC,GAAG,MAAM3B,WAAW,CAAC4B,GAAG,CAAE,SAAQlB,QAAS,EAAC,CAAC;MAC3DE,WAAW,CAACe,IAAI,CAAC;IACnB,CAAC;IAEDD,SAAS,EAAE;EACb,CAAC,EAAE,CAAChB,QAAQ,CAAC,CAAC;EAEd,OACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACGC,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEkB,SAAS,GAClB,MAAC,KAAK,CAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,aACJ,MAAC,yBAAyB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,gBAAW,GAAG,EACjD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,4BAA6B,CACjB,GAEd;IAAK,SAAS,EAAE3B,MAAM,CAAC4B,UAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAC/B,CAACnB,QAAQ,GACR;IAAK,SAAS,EAAC,SAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACtB,MAAC,OAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CACP,GAEN;IAAK,SAAS,EAAET,MAAM,CAAC6B,MAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAC5B,MAAC,IAAI;IAAC,IAAI,EAAC,mBAAmB;IAAC,EAAE,EAAG,UAASrB,QAAS,EAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACtD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE;IACE,GAAG,EAAG,sCAAqCC,QAAQ,CAACM,EAAG,oBAAoB;IAC3E,GAAG,EAAEP,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACd,CACA,CACC,CAEV,EACD;IAAI,SAAS,EAAER,MAAM,CAACQ,QAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAEA,QAAQ,CAAM,EAC9C,CAACC,QAAQ,GACR;IAAK,SAAS,EAAC,SAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACtB,MAAC,OAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CACP,GAEN;IAAK,SAAS,EAAET,MAAM,CAAC8B,OAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAC7B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,eACW,GAAG,EACZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACGlC,yBAAyB,CAAC,IAAImC,IAAI,CAACtB,QAAQ,CAACqB,OAAO,CAAC,EAAE;IACrDE,SAAS,EAAE;EACb,CAAC,CAAC,CACG,CACL,EACHrB,OAAO,IACN,MAAC,MAAM;IACL,KAAK,EAAE;MAAEsB,eAAe,EAAE;IAAM,CAAE;IAClC,OAAO;IACP,OAAO,EAAEpB,SAAU;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,WAItB,CAEJ,CAEJ,CACG;AAEV,CAAC;AAED,eAAeN,UAAU"},"metadata":{},"sourceType":"module"}